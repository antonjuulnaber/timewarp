"use strict";function q(e){return document.querySelector(e)}function p(e){return e.toString().padStart(2,"0")}async function parsePaste(e){var t,n,u;let s=/(\b|\s|\D|^)(?<hour>[01]\d(?=[:;.,_ ])|2[0-3](?=[:;.,_ ])|\d(?=[:;.,_ ])|0(?=[0-5]\d)|[01]\d|2[0-3]|\d)[:;.,_\s]{0,3}(?<minute>[0-5]\d|\d?)(\b|\s|\D|$)/m.exec(e.clipboardData.getData("Text")),o=document.activeElement;"INPUT"===o.tagName&&o.classList.contains("input")&&(null===(t=null==s?void 0:s.groups)||void 0===t?void 0:t.hour)&&(o.value=p(null===(n=null==s?void 0:s.groups)||void 0===n?void 0:n.hour)+":"+p((null===(u=null==s?void 0:s.groups)||void 0===u?void 0:u.minute)||"00"),o.dispatchEvent(new Event("input")))}async function togglePageState(e){e?(document.body.classList.add("foutput"),document.body.classList.remove("finput")):(document.body.classList.remove("foutput"),document.body.classList.add("finput"))}async function calculateHours(){let e=q("input#start").value.split(":",2),t=q("input#end").value.split(":",2),n=Number(e[0])+Number(e[1])/60,u=Number(t[0])+Number(t[1])/60,s=0;s=n<u?u-n:24-n+u,s=Math.round(100*s)/100,q("#result").value=s.toString().replace(".",",")}async function prepareInputs(){let e=document.querySelectorAll("input.input");for(let t=0;t<e.length;t++)e[t].addEventListener("input",(()=>{validateInputs()?(calculateHours(),togglePageState(!0)):togglePageState(!1)}));document.addEventListener("paste",(e=>{e.preventDefault(),parsePaste(e)}));let t=[].slice.call(document.querySelectorAll("input.input")),n=q("#result");t.push(n);for(const e of t)e.addEventListener("keydown",(function(e){"Enter"===e.key&&(e.preventDefault(),copyResult())}));q("#copy a").addEventListener("click",(()=>{copyResult()})),n.addEventListener("input",(()=>{validateInputs()&&calculateHours()})),n.addEventListener("mouseup",(()=>{setTimeout((()=>{n.select()}),10)}))}async function copyResult(){validateInputs()&&(q("#copy").classList.remove("pressed"),setTimeout((()=>{q("#copy").classList.add("pressed")}),20),q("#result").select(),document.execCommand("copy"))}function validateInputs(){let e=document.querySelectorAll("input.input"),t=!0;for(let n=0;n<e.length;n++)e[n].value||e[n].value.match(/^([01]\d|2[0123]|\d):\d{1,2}$/)||(t=!1);return t}async function insertTime(){let e=new Date;e.setMinutes(e.getMinutes()+1),q("input#end").value=p(e.getHours())+":"+p(e.getMinutes())}async function registerServiceWorker(){"serviceWorker"in navigator&&navigator.serviceWorker.register("/serviceworker.js")}document.addEventListener("DOMContentLoaded",(()=>{prepareInputs(),insertTime(),registerServiceWorker()}));