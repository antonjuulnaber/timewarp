"use strict";function q(a){return document.querySelector(a)}function p(a){return a.toString().padStart(2,"0")}async function parsePaste(a){let b=/(\b|\s|\D|^)(?<hour>[01]\d(?=[:;.,_ ])|2[0123](?=[:;.,_ ])|\d(?=[:;.,_ ])|0(?=[012345]\d)|[01]\d|2[0123]|\d)[:;.,_\s]{0,3}(?<minute>[012345]\d|\d?)(\b|\s|\D|$)/m.exec(a.clipboardData.getData("Text"))||{groups:"hour"},c=document.activeElement;"INPUT"==c.tagName&&c.classList.contains("input")&&b.groups.hour&&(c.value=p(b.groups.hour)+":"+p(b.groups.minute||"00"),c.dispatchEvent(new Event("input")))}async function togglePageState(a){a?(document.body.classList.add("foutput"),document.body.classList.remove("finput")):(document.body.classList.remove("foutput"),document.body.classList.add("finput"))}async function calculateHours(){let a=q("input#start").value.split(":",2),b=q("input#end").value.split(":",2),c=+a[0]+ +a[1]/60,d=+b[0]+ +b[1]/60,e=0;e=c<d?d-c:24-c+d,e=Math.round(100*e)/100,q("#result").value=e.toString().replace(".",",")}async function prepareInputs(){let a=document.querySelectorAll("input.input");for(let b=0;b<a.length;b++)a[b].addEventListener("input",()=>{validateInputs()?(calculateHours(),togglePageState(!0)):togglePageState(!1)});document.addEventListener("paste",a=>{a.preventDefault(),parsePaste(a)});let b=[].slice.call(document.querySelectorAll("a")),c=q("#result");b.push(c);for(let c=0;c<b.length;c++)b[c].addEventListener("keydown",a=>{"Enter"===a.key&&(a.preventDefault(),copyResult())});q("#copy a").addEventListener("click",()=>{copyResult()}),c.addEventListener("input",()=>{validateInputs()&&calculateHours()}),c.addEventListener("mouseup",()=>{setTimeout(()=>{c.select()},10)})}async function copyResult(){validateInputs()&&(q("#copy").classList.remove("pressed"),setTimeout(()=>{q("#copy").classList.add("pressed")},20),q("#result").select(),document.execCommand("copy"))}function validateInputs(){let a=document.querySelectorAll("input.input"),b=!0;for(let c=0;c<a.length;c++)a[c].value||a[c].value.match(/^([01]\d|2[0123]|\d):\d{1,2}$/)||(b=!1);return b}async function insertTime(){let a=new Date;a.setMinutes(a.getMinutes()+1),q("input#end").value=p(a.getHours())+":"+p(a.getMinutes())}async function registerServiceWorker(){"serviceWorker"in navigator&&navigator.serviceWorker.register("../sw.min.js")}document.addEventListener("DOMContentLoaded",()=>{prepareInputs(),insertTime(),registerServiceWorker()});